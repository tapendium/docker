steps:
  - label: ":docker: Load Docker hub credentials"
    plugins:
      - tapendium/1password-secrets#v1.1.0:
          env:
            DOCKER_LOGIN_PASSWORD:
              secret-uuid: zisch5odkndtzeb6pqupfazww4
              field: credential
  - label: ":pipeline: triggering deploy pipelines"
    plugins:
      - chronotc/monorepo-diff:
          diff: "git diff --name-only HEAD..main"
          watch:
            - path: cfnlint
              config:
                label: ":pipeline: Upload deploy pipeline for cfnlint container"
                command: buildkite-agent pipeline upload .buildkite/deploy.yml
                env:
                  - CONTAINER_NAME=cfnlint
                  - DOCKER_LOGIN_PASSWORD
